<html>
    <head>
        <title>Recipe Options</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body onload="onLoad();">
        
        <div id="node-id"></div>

        <script>
            function onLoad() {
                fetch('./recipe.json')
                    .then((response) => response.json())
                    .then((json) => receivedJSON(json));
            }
            
            function receivedJSON(json) {
                var table = document.getElementById("ingredients");
                
                for (recipe in json["recipe"]) {
                    var recipeMatches = true;
                    for (ingredient in recipe["ingredients"]) {
                        var foundIngredient = false;
                        for (var r = 1, row; row = table.rows[r]; r++) {
                            if (row.cells[1].innerText === ingredient) {
                                foundIngredient = true;
                                break;
                            }
                        }
                        
                        if (!foundIngredient) {
                            recipeMatches = false;
                            break;
                        }
                    }
                    
                    if (recipeMatches) {
                        var node = document.getElementById('node-id');
                        node.innerHTML('<h1>some dynamic html</h1>');
                    }
                }
            }
        </script>
    </body>
</html>
